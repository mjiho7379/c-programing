#include <stdio.h>
#define MAX_PRODUCTS 5

void handle_stock_in(int stock[]);
void handle_sales_out(int sold[]);
void display_product_status(const int stock[], const int sold[]);

int main()
{
    int num;
    int stock[MAX_PRODUCTS] = { 0 };
    int sold[MAX_PRODUCTS] = { 0 };

    while (1) {
        printf("[쇼핑몰 관리 프로그램]\n");
        printf("원하는 메뉴를 선택하세요(1.입고, 2.출고, 3.상품 현황, 4.종료)\n");
        printf("입력:");
        scanf("%d", &num);

        switch (num) {
        case 1:
            handle_stock_in(stock);
            break;
        case 2:
            handle_sales_out(sold);
            break;
        case 3:
            display_product_status(stock, sold);
            break;
        case 4:
            return 0;
        default:
            printf("잘못된 메뉴 선택입니다.\n");
            break;
        }
    }
    return 0;
}

void handle_stock_in(int stock[]) {
    int num2, id;
    printf("입고수량 입력(1.전체 상품 입고수량 입력, 2.개별 상품 입력)\n");
    printf("입력:");
    scanf("%d", &num2);
    switch (num2) {
    case 1:
        printf("입고수량을 입력하세요:");
        for (int i = 0; i < 5; i++) {
            scanf("%d", &stock[i]);
        }
        break;
    case 2:
        printf("id입력:");
        scanf("%d", &id);
        printf("입고수량[%d]:", id);
        scanf("%d", &stock[id - 1]);
        break;
    }
}

void handle_sales_out(int sold[]) {
    int num3, id;
    printf("판매수량 입력(1.전체 판매수량 입력, 2.개별 판매 입력)\n");
    printf("입력:");
    scanf("%d", &num3);
    switch (num3) {
    case 1:
        printf("판매 수량을 입력하세요: ");
        for (int i = 0; i < 5; i++) {
            scanf("%d", &sold[i]);
        }
        break;
    case 2:
        printf("id입력:");
        scanf("%d", &id);
        printf("판매수량[%d]:", id);
        scanf("%d", &sold[id - 1]);
        break;
    }
}

void display_product_status(const int stock[], const int sold[]) {
    int inventory[MAX_PRODUCTS];

    for (int i = 0; i < 5; i++) {
        inventory[i] = stock[i] - sold[i];
    }
    printf("재고 수량: ");
    for (int i = 0; i < 5; i++) {
        printf("%d ", inventory[i]);
    }
    printf("\n");
    int total_sales = 0, total_stock = 0;
    for (int i = 0; i < 5; i++) {
        total_sales += sold[i];
        total_stock += stock[i];
    }
    double rate = (total_stock > 0) ? (double)total_sales / total_stock * 100.0 : 0.0;
    printf("총 판매량: %d (판매율: %.2f%%)\n", total_sales, rate);

    int max = sold[0];
    int max_id = 1;
    for (int i = 1; i < 5; i++) {
        if (sold[i] > max) {
            max = sold[i];
            max_id = i + 1;
        }
    }
    printf("가장 많이 판매된 상품: ID %d, 판매량 %d\n", max_id, max);

    int min = sold[0];
    int min_id = 1;
    for (int i = 1; i < 5; i++) {
        if (sold[i] < min) {
            min = sold[i];
            min_id = i + 1;
        }
    }
    printf("가장 적게 판매된 상품: ID %d, 판매량 %d\n", min_id, min);

    for (int i = 0; i < 5; i++) {
        if (inventory[i] <= 2) {
            printf("상품 ID %d: 재고 부족 (%d)\n", i + 1, inventory[i]);
        }
    }
}
